import { AnatomyCanvas } from '@/components/viewer';
import { InfoPanel, ResponsiveViewControls } from '@/components/ui';
import { ExerciseLibraryModal, LibraryFAB } from '@/components/features/exerciseLibrary'
import { Header } from '@/components/layout';


/**
 * Main application component.
 * Combines the 3D viewer with UI overlays.
 */
function App() {

  return (

    <div className="w-screen h-screen bg-surface-950 overflow-hidden relative">
      {/* Background gradient */}
      <div className="absolute inset-0 bg-gradient-to-b from-surface-900 via-surface-950 to-surface-950" />

      {/* Subtle grid pattern */}
      <div
        className="absolute inset-0 opacity-[0.02]"
        style={{
          backgroundImage: `
            linear-gradient(to right, rgb(255 255 255 / 0.1) 1px, transparent 1px),
            linear-gradient(to bottom, rgb(255 255 255 / 0.1) 1px, transparent 1px)
          `,
          backgroundSize: '40px 40px',
        }}
      />

      {/* 3D Canvas */}
      <div className="absolute inset-0">
        <AnatomyCanvas />
      </div>

      {/* UI Overlays */}
      <Header />
      <div>
        <ResponsiveViewControls />
      </div>
      <InfoPanel />
      <ExerciseLibraryModal />
      <LibraryFAB />

      {/* Instructions overlay for first-time users */}
      <div className="absolute bottom-4 left-1/2 -translate-x-1/2 pointer-events-none">
        <div className="bg-surface-900/80 backdrop-blur-xl rounded-full px-4 py-2 border border-surface-700/50">
          <p className="text-xs text-surface-400 flex items-center gap-3">
            <span className="flex items-center gap-1.5">
              <kbd className="px-1.5 py-0.5 bg-surface-800 rounded text-surface-300 font-mono">Drag</kbd>
              <span>
                <svg className="w-5 h-5" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                  <path fillRule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"/>
                  <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"/>
                </svg>
            </span>
            </span>
            <span className="flex items-center gap-1.5">
              <kbd className="px-1.5 py-0.5 bg-surface-800 rounded text-surface-300 font-mono">⌘ + Drag</kbd>
              <span>
                <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.69 12.29C20.65 12.38 20.6 12.46 20.53 12.53L18.03 15.03C17.88 15.18 17.69 15.25 17.5 15.25C17.31 15.25 17.12 15.18 16.97 15.03C16.68 14.74 16.68 14.26 16.97 13.97L18.19 12.75H12.75V18.19L13.97 16.97C14.26 16.68 14.74 16.68 15.03 16.97C15.32 17.26 15.32 17.74 15.03 18.03L12.53 20.53C12.46 20.6 12.38 20.65 12.29 20.69C12.2 20.73 12.1 20.75 12 20.75C11.9 20.75 11.8 20.73 11.71 20.69C11.62 20.65 11.54 20.6 11.47 20.53L8.97 18.03C8.68 17.74 8.68 17.26 8.97 16.97C9.26 16.68 9.74 16.68 10.03 16.97L11.25 18.19V12.75H5.81L7.03 13.97C7.32 14.26 7.32 14.74 7.03 15.03C6.88 15.18 6.69 15.25 6.5 15.25C6.31 15.25 6.12 15.18 5.97 15.03L3.47 12.53C3.4 12.46 3.35 12.38 3.31 12.29C3.23 12.11 3.23 11.9 3.31 11.72C3.35 11.63 3.4 11.55 3.47 11.48L5.97 8.98C6.26 8.69 6.74 8.69 7.03 8.98C7.32 9.27 7.32 9.75 7.03 10.04L5.81 11.26H11.25V5.81L10.03 7.03C9.74 7.32 9.26 7.32 8.97 7.03C8.68 6.74 8.68 6.26 8.97 5.97L11.47 3.47C11.54 3.4 11.62 3.35 11.71 3.31C11.89 3.23 12.1 3.23 12.28 3.31C12.37 3.35 12.45 3.4 12.52 3.47L15.02 5.97C15.31 6.26 15.31 6.74 15.02 7.03C14.87 7.18 14.68 7.25 14.49 7.25C14.3 7.25 14.11 7.18 13.96 7.03L12.74 5.81V11.25H18.18L16.96 10.03C16.67 9.74 16.67 9.26 16.96 8.97C17.25 8.68 17.73 8.68 18.02 8.97L20.52 11.47C20.59 11.54 20.64 11.62 20.68 11.71C20.76 11.89 20.76 12.1 20.68 12.28L20.69 12.29Z" fill="currentColor"/>
                </svg>
                </span>
            </span>
            <span className="text-surface-700">•</span>
            <span className="flex items-center gap-1.5">
              <kbd className="px-1.5 py-0.5 bg-surface-800 rounded text-surface-300 font-mono">Scroll</kbd>
              <span>
                <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M10.77 18.3C9.2807 18.3 7.82485 17.8584 6.58655 17.031C5.34825 16.2036 4.38311 15.0275 3.81318 13.6516C3.24325 12.2757 3.09413 10.7616 3.38468 9.30096C3.67523 7.84029 4.39239 6.49857 5.44548 5.44548C6.49857 4.39239 7.84029 3.67523 9.30096 3.38468C10.7616 3.09413 12.2757 3.24325 13.6516 3.81318C15.0275 4.38311 16.2036 5.34825 17.031 6.58655C17.8584 7.82485 18.3 9.2807 18.3 10.77C18.3 11.7588 18.1052 12.738 17.7268 13.6516C17.3484 14.5652 16.7937 15.3953 16.0945 16.0945C15.3953 16.7937 14.5652 17.3484 13.6516 17.7268C12.738 18.1052 11.7588 18.3 10.77 18.3ZM10.77 4.74999C9.58331 4.74999 8.42327 5.10189 7.43657 5.76118C6.44988 6.42046 5.68084 7.35754 5.22672 8.45389C4.77259 9.55025 4.65377 10.7566 4.88528 11.9205C5.11679 13.0844 5.68824 14.1535 6.52735 14.9926C7.36647 15.8317 8.43556 16.4032 9.59945 16.6347C10.7633 16.8662 11.9697 16.7474 13.0661 16.2933C14.1624 15.8391 15.0995 15.0701 15.7588 14.0834C16.4181 13.0967 16.77 11.9367 16.77 10.75C16.77 9.15869 16.1379 7.63257 15.0126 6.50735C13.8874 5.38213 12.3613 4.74999 10.77 4.74999Z" fill="currentColor"/>
                  <path d="M20 20.75C19.9015 20.7504 19.8038 20.7312 19.7128 20.6934C19.6218 20.6557 19.5392 20.6001 19.47 20.53L15.34 16.4C15.2075 16.2578 15.1354 16.0697 15.1388 15.8754C15.1422 15.6811 15.221 15.4958 15.3584 15.3583C15.4958 15.2209 15.6812 15.1422 15.8755 15.1388C16.0698 15.1354 16.2578 15.2075 16.4 15.34L20.53 19.47C20.6704 19.6106 20.7493 19.8012 20.7493 20C20.7493 20.1987 20.6704 20.3893 20.53 20.53C20.4608 20.6001 20.3782 20.6557 20.2872 20.6934C20.1962 20.7312 20.0985 20.7504 20 20.75Z" fill="currentColor"/>
                  <path d="M10.75 14C10.5519 13.9974 10.3626 13.9176 10.2225 13.7775C10.0824 13.6374 10.0026 13.4481 10 13.25V8.25C10 8.05109 10.079 7.86032 10.2197 7.71967C10.3603 7.57902 10.5511 7.5 10.75 7.5C10.9489 7.5 11.1397 7.57902 11.2803 7.71967C11.421 7.86032 11.5 8.05109 11.5 8.25V13.25C11.4974 13.4481 11.4176 13.6374 11.2775 13.7775C11.1374 13.9176 10.9481 13.9974 10.75 14Z" fill="currentColor"/>
                  <path d="M13.25 11.5H8.25C8.05109 11.5 7.86032 11.421 7.71967 11.2803C7.57902 11.1397 7.5 10.9489 7.5 10.75C7.5 10.5511 7.57902 10.3603 7.71967 10.2197C7.86032 10.079 8.05109 10 8.25 10H13.25C13.4489 10 13.6397 10.079 13.7803 10.2197C13.921 10.3603 14 10.5511 14 10.75C14 10.9489 13.921 11.1397 13.7803 11.2803C13.6397 11.421 13.4489 11.5 13.25 11.5Z" fill="currentColor"/>
                  </svg>
              </span>
            </span>
            <span className="text-surface-700">•</span>
            <span className="flex items-center gap-1.5">
              <kbd className="px-1.5 py-0.5 bg-surface-800 rounded text-surface-300 font-mono">Click</kbd>
              <span>
                <svg className="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 16.75C11.8019 16.7474 11.6126 16.6676 11.4725 16.5275C11.3324 16.3874 11.2526 16.1981 11.25 16V11C11.25 10.8011 11.329 10.6103 11.4697 10.4697C11.6103 10.329 11.8011 10.25 12 10.25C12.1989 10.25 12.3897 10.329 12.5303 10.4697C12.671 10.6103 12.75 10.8011 12.75 11V16C12.7474 16.1981 12.6676 16.3874 12.5275 16.5275C12.3874 16.6676 12.1981 16.7474 12 16.75Z" fill="currentColor"/>
                  <path d="M12 9.25C11.8019 9.24741 11.6126 9.16756 11.4725 9.02747C11.3324 8.88737 11.2526 8.69811 11.25 8.5V8C11.25 7.80109 11.329 7.61032 11.4697 7.46967C11.6103 7.32902 11.8011 7.25 12 7.25C12.1989 7.25 12.3897 7.32902 12.5303 7.46967C12.671 7.61032 12.75 7.80109 12.75 8V8.5C12.7474 8.69811 12.6676 8.88737 12.5275 9.02747C12.3874 9.16756 12.1981 9.24741 12 9.25Z" fill="currentColor"/>
                  <path d="M12 21C10.22 21 8.47991 20.4722 6.99987 19.4832C5.51983 18.4943 4.36628 17.0887 3.68509 15.4442C3.0039 13.7996 2.82567 11.99 3.17294 10.2442C3.5202 8.49836 4.37737 6.89472 5.63604 5.63604C6.89472 4.37737 8.49836 3.5202 10.2442 3.17294C11.99 2.82567 13.7996 3.0039 15.4442 3.68509C17.0887 4.36628 18.4943 5.51983 19.4832 6.99987C20.4722 8.47991 21 10.22 21 12C21 14.387 20.0518 16.6761 18.364 18.364C16.6761 20.0518 14.387 21 12 21ZM12 4.5C10.5166 4.5 9.0666 4.93987 7.83323 5.76398C6.59986 6.58809 5.63856 7.75943 5.07091 9.12988C4.50325 10.5003 4.35473 12.0083 4.64411 13.4632C4.9335 14.918 5.64781 16.2544 6.6967 17.3033C7.7456 18.3522 9.08197 19.0665 10.5368 19.3559C11.9917 19.6453 13.4997 19.4968 14.8701 18.9291C16.2406 18.3614 17.4119 17.4001 18.236 16.1668C19.0601 14.9334 19.5 13.4834 19.5 12C19.5 10.0109 18.7098 8.10323 17.3033 6.6967C15.8968 5.29018 13.9891 4.5 12 4.5Z" fill="currentColor"/>
                  </svg>
              </span>
            </span>
          </p>
        </div>
      </div>
    </div>

  );
}

export default App;
